package sqlite

import (
	"fmt"
	"log"
)

// InitializeDefaultUsers åˆå§‹åŒ–é»˜è®¤æµ‹è¯•è´¦å·
func InitializeDefaultUsers() {
	// æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å·²æœ‰ç”¨æˆ·
	var count int64
	if result := DB.Model(&User{}).Count(&count); result.Error != nil {
		log.Printf("æ£€æŸ¥ç”¨æˆ·æ•°å¤±è´¥: %v", result.Error)
		return
	}

	// å¦‚æœå·²æœ‰ç”¨æˆ·ï¼Œè·³è¿‡åˆå§‹åŒ–
	if count > 0 {
		log.Printf("æ•°æ®åº“ä¸­å·²æœ‰ %d ä¸ªç”¨æˆ·ï¼Œè·³è¿‡åˆå§‹åŒ–", count)
		return
	}

	// å®šä¹‰é»˜è®¤æµ‹è¯•è´¦å·
	testUsers := []struct {
		username string
		password string
		desc     string
	}{
		{"test_user", "123456", "åŸºç¡€æµ‹è¯•è´¦å·"},
		{"admin", "admin123", "ç®¡ç†å‘˜è´¦å·"},
		{"demo", "demo123", "æ¼”ç¤ºè´¦å·"},
	}

	fmt.Println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	fmt.Println("ğŸ”‘ åˆå§‹åŒ–é»˜è®¤æµ‹è¯•è´¦å·")
	fmt.Println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

	// åˆ›å»ºæ¯ä¸ªæµ‹è¯•è´¦å·
	for _, user := range testUsers {
		err := CreatUser(user.username, user.password)
		if err != nil {
			fmt.Printf("âŒ åˆ›å»ºè´¦å· '%s' å¤±è´¥: %v\n", user.username, err)
			log.Printf("åˆ›å»ºè´¦å·å¤±è´¥: %v", err)
		} else {
			fmt.Printf("âœ… åˆ›å»ºè´¦å· '%s' æˆåŠŸ (%s)\n", user.username, user.desc)
			fmt.Printf("   ç”¨æˆ·å: %s\n", user.username)
			fmt.Printf("   å¯†ç : %s\n", user.password)
			fmt.Printf("   ç”¨é€”: %s\n", user.desc)
			fmt.Println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
		}
	}

	fmt.Println("âœ¨ åˆå§‹åŒ–å®Œæˆï¼")
	fmt.Println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	fmt.Println("ğŸ“ æµ‹è¯•è´¦å·åˆ—è¡¨ï¼š")
	fmt.Println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
	for _, user := range testUsers {
		fmt.Printf("è´¦å·: %-15s å¯†ç : %-12s\n", user.username, user.password)
	}
	fmt.Println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	fmt.Println("")
}

// PrintTestAccounts æ‰“å°æµ‹è¯•è´¦å·ä¿¡æ¯
func PrintTestAccounts() {
	fmt.Println("")
	fmt.Println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
	fmt.Println("â•‘            ğŸ“‹ æµ‹è¯•è´¦å·ä¿¡æ¯                         â•‘")
	fmt.Println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	fmt.Println("")
	fmt.Println("å¯ä½¿ç”¨ä»¥ä¸‹è´¦å·è¿›è¡Œç™»å½•æµ‹è¯•ï¼š")
	fmt.Println("")
	fmt.Println("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
	fmt.Println("â”‚ è´¦å·: test_user    å¯†ç : 123456                  â”‚")
	fmt.Println("â”‚ è¯´æ˜: åŸºç¡€æµ‹è¯•è´¦å·ï¼Œæ™®é€šç”¨æˆ·                    â”‚")
	fmt.Println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
	fmt.Println("")
	fmt.Println("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
	fmt.Println("â”‚ è´¦å·: admin        å¯†ç : admin123                â”‚")
	fmt.Println("â”‚ è¯´æ˜: ç®¡ç†å‘˜è´¦å·                                â”‚")
	fmt.Println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
	fmt.Println("")
	fmt.Println("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
	fmt.Println("â”‚ è´¦å·: demo         å¯†ç : demo123                 â”‚")
	fmt.Println("â”‚ è¯´æ˜: æ¼”ç¤ºè´¦å·ï¼Œæ™®é€šç”¨æˆ·                        â”‚")
	fmt.Println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
	fmt.Println("")
	fmt.Println("è®¿é—®åœ°å€: http://localhost:5173/login")
	fmt.Println("")
}
